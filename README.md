Proceedd

## Запуск

Требования: `go 1.16`

#### Сервер:
`go run server/server.go <тип> -c <путь к серверному конфигу>`

#### Клиент:
`go run client/client.go <тип> -c <путь к клиентскому конфигу>`

Где `<тип>` может быть:
* `-balancer` (балансировщик)
* `-kv` (система конфигурирования)
* `-full`

Соответственно запускается либо какой-то один компонент или оба вместе.

#### Тестовое приложение:
`go run testserver/testserver.go`

Можно указать свой порт при помощи флага `-port`

## Тестирование

#### Тестовое приложение:
Показывает статистику, по какому пути пришел запрос:

`/low`, `/med` или `/high` – в зависимости от него будет слабая, средняя или сильная нагрузка на CPU.

Используется для тестирования балансировщика.

#### Балансировщик:
Запустить клиент, сервер (с типом `-full` или `-balancer`) и тестовое приложение. Попробовать отправить запрос на его порт (8080 по-умолчанию):

`curl http://localhost:8080/med`

В ответ должен прийти номер сервера тестового приложения.

Для эмуляции балансировки нужно запустить еще один экземпляр клиента на другом порту (например, 5001) и прописать этот порт (`service_port`) в конфиге сервера в секции 
`balancer.upstreams`
#### Онлайн-конфиг:
Запустить клиент, сервер (с типом `-full` или `-kv`). 
В папке client появится файл конфига (имя задается в конфиге клиента в секции `kv.config_path`), скачанный с сервера.

Также можно протестировать работу kv сервера, напрямую отправляя http запросы (порт 8000 по-умолчанию):
* Изменить какое-то значение из конфига или добавить новое:

`curl -X POST http://localhost:8000/config?key=value`

* Получить сам конфиг:

`curl http://localhost:8000/config/full?ts=0`

